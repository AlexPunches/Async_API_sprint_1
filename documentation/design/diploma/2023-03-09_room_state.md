# Состояние комнаты

## Синхронизация состояний

### Через лог состояний

Плеер `организатора` может с заданой переодичностью уведомлять
`комнату` на сервере на какой минуте просмотр сейчас. На сервере
эти данные складывать в `состояние комнаты`. 

При переподключении существующего `зрителя` или приходе нового, 
им первым делом будет передана состояние комнаты с момента
их отсутствия.

### Через запрос к плеерам зрителей

Если не хранить состояние, то серверу придется обращаться
к клиенту, чтобы узнать, на какой минуте проигрывание фильма
сейчас находится. 

В этом взаимодействии сервер выступает как клиент, а клиент - как
сервер. Это усложняет логику.

Плюс, сервер пишет всем получателям сразу. И ответ получит
от всех.  Какой выбирать для нового?

## Организатор

Организатор -- зритель, который собрал комнату. Может 
управлять плеером. Остальные зрители -- не могут.
Плееры зрителей синхронизируются с плеером организатора.

Если организатор уходит из комнаты, то он передает
ярлык "Организатор" какому-то другому зрителю в комнате.

## Многосессионность

Отношение "один-ко-многим" между объектами: 
`Комната` < `Клиент` < `Сессия`.  `Клиент` может входить в
`комнату` многократно, или с нескольких устройств.
