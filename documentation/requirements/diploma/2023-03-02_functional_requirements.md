# Функциональные требования

# Кино с друзьями

### Инициация совместного просмотра


#### Социальные связи.

Можно найти друзей из социальных сетей. И подружиться с
ними уже в кинотеатре. Но дружба в кинотеатре -- это
независимая вещь.

### Видеоряд 

- Только авторизованные пользователи с подпиской 
могут участвовать в совместном просмотре.
- Фильм отображается на экране телевизора.

#### Подключение к совместному просмотру

Если есть ссылка на совместный просмотр, то подключаешься
и смотришь. При этом обязательно наличие подписки в
кинотеатре.

##### Ссылка

Ведет на экран трансляции. На этом экране плеер и чат.

Пусть есть одна ссылка, общая для всех предполагаемых
зрителей. Если кто-то ее засветит в публичном месте,
то гипотетически на частный просмотр и в чат смогут
ворваться непрошенные гости. 

Как способ борьбы с этим -- ссылка может быть индивидуальная
для каждого зрителя.

## Синхронизация плееров

Главное требование: у всех зрителей в плеерах всегда 
отображается одинаковое место в фильме.

### Синхронизация управлением

Ведущий и ведомый плееры.
Ведущий плеер -- Сервер -- Ведомый плеер
```
{
    "type": "pause",    // "play", 
    "frame": "0:52:00",
}
```
Веб-сокеты. Чтобы от сервера клиенту присылать метки времени.
Клиент у нас -- видео-плеер.  Либо плеер, либо браузер,
должен поддерживать веб-сокеты.

Браузер Smart TV поддерживает веб-сокеты?

### Синхронизация реакций на кадр

```
{
    "message": "smiley_face", 
    "frame": "0:52:00",
}
```

Проверка прав на них установку webcocket-соединения должна
быть.

## Пульт управления

Для передачи управления просмотром с одного плеера 
на другой.

Пример сценария. Инициатор совместного просмотра опазывает
на сеанс. И предлагает другим зрителям, начинать просмотр
без него. Тогда инициатор назначает новый master player
у другого зрителя.

## Чат

- Чат между зрителями открывать где-то на телефоне 
или на планшете.
- Время жизни сообщений в чате: наверное, до конца
просмотра. Как минимум. Но в перспективе может быть и
больше.
- Чат может включать реакции на кадр среди сообщений
пользователя. В агрегированном виде, а не обязательно
в виде единичных эмоджи.
- Поиск по сообщениям в чате -- не актуален.
- Сообщения при передаче по сети должны шифроваться.

#### Подключение к совместному чату

В чате все зрители фильма.

Ссылка на чат дает право участвовать в нем. В преспективе
можно давать инициатору совместного просмотра права
админа на чат.

Нужна поддержка проверки доступа к совместным просмотрам.
Например, если не друг, то не можешь подключиться к просмотру.
Даже если ссылка есть.

## Реакции на кадр

- Актуальность такой реакции -- сиюминутная. Даже когда
пользователи перемотают фильм назад, то повторно показывать
реакцию уже не нужно.
- Тем не менее, для аналитиков реакции в совместном просмотре
могут быть ценными.
- Задержка при доставке должна быть минимальна. 

Очень похоже, что это тип контента как в UGC.

# Блоггинг

#### Социальные связи.

Подписчики, платные и бесплатные. Жертвователи.  

##### Есть денежные отношения

- Пожертвование.
  - Если списалось у зрителя, то должно прийти
  на счет блоггера. Больше одного раза списаться или поступить
  не может (если пожертвование было сделано только раз).
- Платная подписка на блог.

Это нужно для проверки доступа к совместным просмотрам
в конкретном блоге.

#### Подключение к совместному чату

Владелец чата может ограничивать гостей. Например, позволять
только друзьям присутствовать. Если участие в совместном
просмотре платное, то только те, кто оплатил, может участвовать.

Возможна роль модератора. И модератор не обязательно владелец
чата.


# Требования

#### Зачем делаем проект 

Для привлечения и удержания пользователей в кинотеатре.

#### Ограничения

Платформы: веб-браузер.
Разработка по Agile.
Для каких пользователей: все подписчики кинотеатра.
Желаемый срок релиза: 18-19 марта.

#### Нулевые состояния

